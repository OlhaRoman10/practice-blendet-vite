var h=e=>{throw TypeError(e)};var m=(e,t,r)=>t.has(e)||h("Cannot "+r);var a=(e,t,r)=>(m(e,t,"read from private field"),r?r.call(e):t.get(e)),g=(e,t,r)=>t.has(e)?h("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),y=(e,t,r,s)=>(m(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);import"./assets/styles-DIRZAYwf.js";import{a as f,P as v,i as P}from"./assets/vendor-BK8-1dZR.js";function u(e){return e.map(({alt_description:t,urls:{small:r}})=>`<li class="gallery-item">
      <img src="${r}" class="gallery-img"
      alt="${t}">
    </li>`).join("")}var i,c,l;class M{constructor(){g(this,i,"https://api.unsplash.com/search/photos");g(this,c,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");g(this,l,"")}async fetchPopularImages(t){const r=`${a(this,i)}?page=${t}&query=popular&per_page=12&orientation=portrait&client_id=${a(this,c)}`;try{return(await f(r)).data}catch(s){console.log(s)}}async fetchImages(t){const r=`${a(this,i)}?page=${t}&query=${a(this,l)}&per_page=12&orientation=portrait&client_id=${a(this,c)}`;try{return(await f(r)).data}catch(s){console.log(s)}}set query(t){y(this,l,t)}}i=new WeakMap,c=new WeakMap,l=new WeakMap;const $=document.querySelector(".js-search-form"),p=document.querySelector(".gallery"),L=document.getElementById("tui-pagination-container"),o=new v(L,{totalItems:0,itemsPerPage:12,visiblePages:5,page:1}),I=o.getCurrentPage();$.addEventListener("submit",S);async function S(e){e.preventDefault();const t=e.target.elements.query.value.trim();if(t===""){P.error({message:"Search field must not be empty!",position:"topRight"});return}n.query=t,o.off("afterMove",q),o.off("afterMove",d);try{const r=await n.fetchImages(I);if(r.results.length===0){P.error({message:"Sorry, there are no images matching your query!",position:"topRight"});return}p.innerHTML=u(r.results),o.reset(r.total),o.on("afterMove",d)}catch(r){console.log(r)}}o.on("afterMove",q);function q(e){const t=e.page;n.fetchPopularImages(t).then(r=>{p.innerHTML=u(r.results)})}function d(e){const t=e.page;n.fetchImages(t).then(r=>{p.innerHTML=u(r.results)})}const n=new M;n.fetchPopularImages(I).then(e=>{p.innerHTML=u(e.results),o.reset(e.total)});
//# sourceMappingURL=gallery.js.map
