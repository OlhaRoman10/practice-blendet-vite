var f=e=>{throw TypeError(e)};var y=(e,r,t)=>r.has(e)||f("Cannot "+t);var a=(e,r,t)=>(y(e,r,"read from private field"),t?t.call(e):r.get(e)),u=(e,r,t)=>r.has(e)?f("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),d=(e,r,t,s)=>(y(e,r,"write to private field"),s?s.call(e,t):r.set(e,t),t);import"./assets/styles-B_cqaf1B.js";import{a as P,P as S,i as h}from"./assets/vendor-BK8-1dZR.js";function g(e){return e.map(({alt_description:r,urls:{small:t}})=>`<li class="gallery-item">
      <img src="${t}" class="gallery-img"
      alt="${r}">
    </li>`).join("")}var i,c,l;class E{constructor(){u(this,i,"https://api.unsplash.com/search/photos");u(this,c,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");u(this,l,"")}async fetchPopularImages(r){const t=`${a(this,i)}?page=${r}&query=popular&per_page=12&orientation=portrait&client_id=${a(this,c)}`;try{return(await P(t)).data}catch(s){console.log(s)}}async fetchImages(r){const t=`${a(this,i)}?page=${r}&query=${a(this,l)}&per_page=12&orientation=portrait&client_id=${a(this,c)}`;try{return(await P(t)).data}catch(s){console.log(s)}}set query(r){d(this,l,r)}}i=new WeakMap,c=new WeakMap,l=new WeakMap;const _=document.querySelector(".js-search-form"),p=document.querySelector(".gallery"),q=document.querySelector(".loader"),m=document.getElementById("tui-pagination-container"),o=new S(m,{totalItems:0,itemsPerPage:12,visiblePages:5,page:1}),L=o.getCurrentPage();_.addEventListener("submit",w);async function w(e){e.preventDefault();const r=e.target.elements.query.value.trim();if(r===""){h.error({message:"Search field must not be empty!",position:"topRight"});return}n.query=r,o.off("afterMove",M),o.off("afterMove",v),I(q);try{const t=await n.fetchImages(L);if(t.results.length===0){h.error({message:"Sorry, there are no images matching your query!",position:"topRight"});return}h.success({message:`We found ${t.total} images!`}),t.total<=12?$(m):I(m),p.innerHTML=g(t.results),o.reset(t.total),o.on("afterMove",v)}catch(t){console.log(t)}finally{$(q)}}o.on("afterMove",M);function M(e){const r=e.page;n.fetchPopularImages(r).then(t=>{p.innerHTML=g(t.results)})}function v(e){const r=e.page;n.fetchImages(r).then(t=>{p.innerHTML=g(t.results)})}const n=new E;n.fetchPopularImages(L).then(e=>{p.innerHTML=g(e.results),o.reset(e.total)});function I(e){e.classList.remove("hidden")}function $(e){e.classList.add("hidden")}
//# sourceMappingURL=gallery.js.map
