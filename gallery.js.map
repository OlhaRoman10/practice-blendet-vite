{"version":3,"file":"gallery.js","sources":["../src/js/createGalleryCard.js","../src/js/UnsplashAPI.js","../src/js/gallery.js"],"sourcesContent":["export function createGalleryCard(images) {\n return images\n    .map(\n      ({ alt_description, urls: { small } }) => \n        `<li class=\"gallery-item\">\n      <img src=\"${small}\" class=\"gallery-img\"\n      alt=\"${alt_description}\">\n    </li>`\n    )\n    .join(\"\");\n}\n","import axios from 'axios';\n\nexport class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #query = \"\";\n\n  async fetchPopularImages(page) {\n    const url = `${\n      this.#BASE_URL\n    }?page=${page}&query=popular&per_page=12&orientation=portrait&client_id=${\n      this.#API_KEY\n    }`;\n    try {\n      const response = await axios(url);\n      return response.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async fetchImages(page) {\n    const url = `${\n      this.#BASE_URL\n    }?page=${page}&query=${this.#query}&per_page=12&orientation=portrait&client_id=${\n      this.#API_KEY\n    }`;\n    try {\n      const response = await axios(url);\n      return response.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n}\n","// Створи додаток для пошуку зображень по ключовому слову.\n// При завантаженні сторінки має відбуватись запит за популярними зображеннями (ключове слово - popular),\n// а при введенні якогось слова в форму - пошук відбувається по цьому ключовому слову і сторінка перемальовується.\n\n// Використовуй UnsplashAPI (https://unsplash.com/documentation) для запитів. Створи клас UnsplashAPI для інкапсуляції\n// логіки запитів в одному місті в окремому файлі.\n// Створи окремо файл createGalleryCard.js, в якому буде функція, що відповідатиме за створення розмітки.\n// В головному файлі gallery.js має бути вся логіка роботи застосунку.\n\n// Підключи пагінацію, використовуючи бібліотеку tui-pagination, щоб можна було робити запит за різними сторінками.\n// Додай слухача на форму, щоб робити новий запит по ключовому слову (додавши відповідний метод класу UnsplashAPI).\n// Додай лоадер під час завантаження даних з бекенда.\n// Не забудь про відповідні перевірки і сповіщення при роботі з запитами і з формою.\nimport Pagination from 'tui-pagination';\nimport \"tui-pagination/dist/tui-pagination.min.css\";\nimport { createGalleryCard } from './createGalleryCard';\nimport { UnsplashAPI } from './UnsplashAPI';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector(\".js-search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\n\nconst container = document.getElementById('tui-pagination-container');\nconst pagination = new Pagination(container, {\n    totalItems: 0,\n    itemsPerPage: 12,\n    visiblePages: 5,\n    page: 1,\n});\n\nconst page = pagination.getCurrentPage();\n\nform.addEventListener(\"submit\", getPhotos);\n\nasync function getPhotos(event) {\n    event.preventDefault();\n    const searchText = event.target.elements.query.value.trim();\n    if (searchText === \"\") {\n        iziToast.error({\n            message: \"Search field must not be empty!\",\n            position: \"topRight\",\n        })\n        return\n    }\n    api.query = searchText;\n    pagination.off('afterMove', renderPhotos);\n    pagination.off('afterMove', renderPhotosByQuery);\n    showElement(loader);\n    try {\n        const images = await api.fetchImages(page);\n        if (images.results.length === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your query!\",\n                position: \"topRight\",\n            });\n            return\n        }\n        iziToast.success({ message: `We found ${images.total} images!` })\n        if (images.total<=12) {\n            hideElement(container);\n            \n        }\n        else {\n            showElement(container);\n        }\n        gallery.innerHTML = createGalleryCard(images.results);\n        pagination.reset(images.total);\n        pagination.on('afterMove', renderPhotosByQuery);\n    } catch (error) {\n        console.log(error);\n    }\n    finally {\n        hideElement(loader);\n    }\n}\n\npagination.on('afterMove', renderPhotos);\n\nfunction renderPhotos(event) {\n    const currentPage = event.page;\n    api.fetchPopularImages(currentPage).then(data => {\n        gallery.innerHTML = createGalleryCard(data.results);\n    })\n}\n\nfunction renderPhotosByQuery(event) {\n    const currentPage = event.page;\n    api.fetchImages(currentPage).then(data => {\n        gallery.innerHTML = createGalleryCard(data.results);\n    })\n}\n\nconst api = new UnsplashAPI();\napi.fetchPopularImages(page).then(data => {\n    gallery.innerHTML = createGalleryCard(data.results);\n    pagination.reset(data.total);\n });\n\n \n function showElement(element) {\n     element.classList.remove(\"hidden\");\n  }\n function hideElement(element) {\n     element.classList.add(\"hidden\");\n  }\n"],"names":["createGalleryCard","images","alt_description","small","UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","page","url","__privateGet","axios","error","newQuery","__privateSet","form","gallery","loader","container","pagination","Pagination","getPhotos","event","searchText","iziToast","api","renderPhotos","renderPhotosByQuery","showElement","hideElement","currentPage","data","element"],"mappings":"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"}